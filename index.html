<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>KotlinX Serialization JsonPath</title>
    <link href="images/logo-icon.svg" rel="icon" type="image/svg">
    <script>var pathToRoot = "";</script>
    <script>const storage = localStorage.getItem("dokka-dark-mode")
    if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    } else {
        const savedDarkMode = JSON.parse(storage)
        if(savedDarkMode === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    }
    </script>
<script type="text/javascript" src="scripts/sourceset_dependencies.js" async="async"></script>
<link href="styles/style.css" rel="Stylesheet">
<link href="styles/jetbrains-mono.css" rel="Stylesheet">
<link href="styles/main.css" rel="Stylesheet">
<link href="styles/prism.css" rel="Stylesheet">
<link href="styles/logo-styles.css" rel="Stylesheet">
<script type="text/javascript" src="scripts/clipboard.js" async="async"></script>
<script type="text/javascript" src="scripts/navigation-loader.js" async="async"></script>
<script type="text/javascript" src="scripts/platform-content-handler.js" async="async"></script>
<script type="text/javascript" src="scripts/main.js" defer="defer"></script>
<script type="text/javascript" src="scripts/prism.js" async="async"></script>
<script type="text/javascript" src="scripts/symbol-parameters-wrapper_deferred.js" defer="defer"></script>
</head>
<body>
<div class="navigation-wrapper" id="navigation-wrapper">
    <div id="leftToggler"><span class="icon-toggler"></span></div>
    <div class="library-name">
            <a href="index.html">
                    <span>KotlinX Serialization JsonPath</span>
            </a>
    </div>
    <div>
0.2.1    </div>
    <div class="pull-right d-flex">
        <button id="theme-toggle-button"><span id="theme-toggle"></span></button>
        <div id="searchBar"></div>
    </div>
</div>
<div id="container">
    <div id="leftColumn">
        <div id="sideMenu"></div>
    </div>
    <div id="main">
<div class="main-content" id="content" pageIds="KotlinX Serialization JsonPath::////PointingToDeclaration//788909594">
  <div class="breadcrumbs"></div>
  <div class="cover ">
    <h1 class="cover"><span>Kotlin</span><wbr></wbr><span><span>X</span></span> <span><span>Serialization</span></span> <span>Json</span><wbr></wbr><span><span>Path</span></span></h1>
    <div class="platform-hinted UnderCoverText" data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":dokkaHtml/commonMain"><p class="paragraph"><a href="https://maven-badges.herokuapp.com/maven-central/io.github.nomisrev/kotlinx-serialization-jsonpath"></a> <a href="https://s01.oss.sonatype.org/service/local/repositories/snapshots/content/io/github/nomisrev"></a></p><p class="paragraph">JsonPath offers a simple DSL to work with JsonElement from Kotlinx Serialization Json, this allows you to easily work with JSON in Kotlin in a typed manner. Simply add the following dependency as <code class="lang-kotlin">implementation</code> in the <code class="lang-kotlin">build.gradle</code> dependencies` block.</p><div class="sample-container"><pre><code class="block lang-groovy" theme="idea">dependencies {<br>  implementation(&quot;io.github.nomisrev:kotlinx-serialization-jsonpath:0.2.0&quot;)<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">Let's dive right in with following <code class="lang-kotlin">JSON_STRING</code> as input <code class="lang-kotlin">JsonElement</code> that models a simple company.</p><!--- TEST_NAME ReadMeSpec --> <div class="sample-container"><pre><code class="block lang-json" theme="idea">{<br>  &quot;name&quot;: &quot;Arrow&quot;,<br>  &quot;address&quot;: {<br>    &quot;city&quot;: &quot;Functional Town&quot;,<br>    &quot;street&quot;: {<br>      &quot;number&quot;: 1337,<br>      &quot;name&quot;: &quot;Functional street&quot;<br>    }<br>  },<br>  &quot;employees&quot;: [<br>    {<br>      &quot;name&quot;: &quot;John&quot;,<br>      &quot;lastName&quot;: &quot;doe&quot;<br>    },<br>    {<br>      &quot;name&quot;: &quot;Jane&quot;,<br>      &quot;lastName&quot;: &quot;doe&quot;<br>    }<br>  ]<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">Given this <code class="lang-kotlin">JsonElement</code> we can <i>select</i> the <code class="lang-kotlin">name</code> from the <code class="lang-kotlin">JsonElement</code>. This gives us an <code class="lang-kotlin">Optional</code> from the <i>root</i> <code class="lang-kotlin">JsonElement</code> to the <code class="lang-kotlin">name</code> property with type <code class="lang-kotlin">String</code>.  We can then use this <i>JsonPath</i> to <i>modify</i> the original <code class="lang-kotlin">JsonElement</code>'s <code class="lang-kotlin">name</code> property, this gives us back <i>a new</i> <code class="lang-kotlin">JsonElement</code> with the <i>name</i> modified according to the passed <code class="lang-kotlin">String::uppercase</code> function.</p><!--- INCLUDE
fun main(): Unit {
----- SUFFIX
}
--><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">  val json: JsonElement = Json.decodeFromString(JSON_STRING)<br>  val name: Optional&lt;JsonElement, String&gt; = JsonPath.select(&quot;name&quot;).string<br>  println(name.modify(json, String::uppercase))</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><blockquote class="quotation"><p class="paragraph">You can get the full code src/jvmTest/kotlin/example/example-readme-01.kt.</p></blockquote><div class="sample-container"><pre><code class="block lang-text" theme="idea">{&quot;name&quot;:&quot;ARROW&quot;,&quot;address&quot;:{&quot;city&quot;:&quot;Functional Town&quot;,&quot;street&quot;:{&quot;number&quot;:1337,&quot;name&quot;:&quot;Functional street&quot;}},&quot;employees&quot;:[{&quot;name&quot;:&quot;John&quot;,&quot;lastName&quot;:&quot;doe&quot;},{&quot;name&quot;:&quot;Jane&quot;,&quot;lastName&quot;:&quot;doe&quot;}]}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">As we've seen above we can <i>select</i> a property from a <i>JsonObject</i>, but what if we want to access deeply nested properties in our <code class="lang-kotlin">JsonElement</code>? For that we can use <i>path</i> which allows you to <i>select</i> deeply nested properties using the <i>dot (.) notation</i> you might know from Javascript.</p><p class="paragraph">Below we <i>select</i> the <i>address</i> <code class="lang-kotlin">JsonObject</code>, and from the <i>address</i> <code class="lang-kotlin">JsonObject</code> we then <i>select</i> the <i>street</i> <code class="lang-kotlin">JsonObject</code>, to then finally <i>select</i> the <i>name</i> of the <i>street</i>.</p><p class="paragraph">This again returns us an <code class="lang-kotlin">Optional&lt;JsonElement, String&gt;</code>, which we use to <i>modify</i> the <code class="lang-kotlin">address.street.name</code>. We then also <i>extract</i> the value using <code class="lang-kotlin">getOrNull</code> which returns us the desired <i>path</i> in our <code class="lang-kotlin">JsonElement</code>, or it returns <i>null</i> if the desired <i>path</i> is not available in our <code class="lang-kotlin">JsonElement</code>.</p><!--- TEST --><!--- INCLUDE
fun main(): Unit {
----- SUFFIX
}
--><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">  val json: JsonElement = Json.decodeFromString(JSON_STRING)<br>  val name: Optional&lt;JsonElement, String&gt; = JsonPath.path(&quot;address.street.name&quot;).string<br>  val res: JsonElement = name.modify(json, String::uppercase).also(::println)<br>  name.getOrNull(res)?.also(::println)</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><blockquote class="quotation"><p class="paragraph">You can get the full code src/jvmTest/kotlin/example/example-readme-02.kt.</p></blockquote><div class="sample-container"><pre><code class="block lang-text" theme="idea">{&quot;name&quot;:&quot;Arrow&quot;,&quot;address&quot;:{&quot;city&quot;:&quot;Functional Town&quot;,&quot;street&quot;:{&quot;number&quot;:1337,&quot;name&quot;:&quot;FUNCTIONAL STREET&quot;}},&quot;employees&quot;:[{&quot;name&quot;:&quot;John&quot;,&quot;lastName&quot;:&quot;doe&quot;},{&quot;name&quot;:&quot;Jane&quot;,&quot;lastName&quot;:&quot;doe&quot;}]}<br>FUNCTIONAL STREET</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">In the previous examples we've seen how we can select properties out of <code class="lang-kotlin">JsonObject</code>, but when working with <code class="lang-kotlin">JsonElement</code> we also often have to deal with <code class="lang-kotlin">JsonArray</code> that can contain many <code class="lang-kotlin">JsonElement</code>. For these use-cases we can use <code class="lang-kotlin">every</code>, which focuses into <i>every</i> <code class="lang-kotlin">JsonElement</code> in our <code class="lang-kotlin">JsonArray</code>.</p><p class="paragraph">In the example below we select the <i>employees</i> <code class="lang-kotlin">JsonArray</code>, and then we select <i>every</i> <code class="lang-kotlin">JsonElement</code> in the <code class="lang-kotlin">JsonArray</code>. We then <i>select</i> the <i>name</i> out of <i>every</i> <code class="lang-kotlin">JsonElement</code>.</p><p class="paragraph">Instead of <code class="lang-kotlin">Optional&lt;JsonElement, String&gt;</code> it now returns <code class="lang-kotlin">Every&lt;JsonElement, String&gt;</code>, since we selected <i>many properties</i> instead of a <i>single property</i>.</p><p class="paragraph">Just like before we can apply a function to it using <i>modify</i>, and we can also <i>extract every property</i> using <code class="lang-kotlin">getAll</code>. This returns us an <code class="lang-kotlin">emptyList()</code> when no values were found along the <i>path</i>, or all found values inside a <code class="lang-kotlin">List</code>.</p><!--- TEST --><!--- INCLUDE
fun main(): Unit {
----- SUFFIX
}
--><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">  val json: JsonElement = Json.decodeFromString(JSON_STRING)<br>  val employeesName: Every&lt;JsonElement, String&gt; = JsonPath.select(&quot;employees&quot;).every.select(&quot;name&quot;).string<br>  val res: JsonElement = employeesName.modify(json, String::uppercase).also(::println)<br>  employeesName.getAll(res).also(::println)</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><blockquote class="quotation"><p class="paragraph">You can get the full code src/jvmTest/kotlin/example/example-readme-03.kt.</p></blockquote><div class="sample-container"><pre><code class="block lang-text" theme="idea">{&quot;name&quot;:&quot;Arrow&quot;,&quot;address&quot;:{&quot;city&quot;:&quot;Functional Town&quot;,&quot;street&quot;:{&quot;number&quot;:1337,&quot;name&quot;:&quot;Functional street&quot;}},&quot;employees&quot;:[{&quot;name&quot;:&quot;JOHN&quot;,&quot;lastName&quot;:&quot;doe&quot;},{&quot;name&quot;:&quot;JANE&quot;,&quot;lastName&quot;:&quot;doe&quot;}]}<br>[JOHN, JANE]</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div></div></div>
  </div>
  <h2 class="">Packages</h2>
  <div class="table"><a data-name="-1592168014%2FPackages%2F788909594" anchor-label="io.github.nomisrev" id="-1592168014%2FPackages%2F788909594" data-filterable-set=":dokkaHtml/commonMain"></a>
    <div class="table-row" data-filterable-current=":dokkaHtml/commonMain" data-filterable-set=":dokkaHtml/commonMain">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="-kotlin-x -serialization -json-path/io.github.nomisrev/index.html">io.github.nomisrev</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-1592168014%2FPackages%2F788909594"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right"></div>
        </div>
        <div></div>
      </div>
    </div>
  </div>
</div>
      <div class="footer">
        <span class="go-to-top-icon"><a href="#content" id="go-to-top-link"></a></span><span>© 2023 Copyright</span><span
                class="pull-right"><span>Generated by </span><a
                href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span>
      </div>
    </div>
</div>
</body>
</html>
